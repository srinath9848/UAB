@model UAB.DTO.LelvellingReportDTO
@{
    ViewData["Title"] = "Home Page";
}

<div class="container-fluid">
    <div class="row">
        <br /><br />
        <h4>
            Dashboard will show backlog status, Codig status, QA status, Shadow QA Status, and
            date of service currently coding
        </h4>
        <div class="col-md-12 form-horizontal">
            <div class="card">
                <div class="card-body">
                    <br />
                    <div class="col-md-6">
                        <label for="fname">Select Report Type</label>
                        <select id="reportType">
                            <option value="--Select--">--Select--</option>
                            <option value="LevellingSummaryReport">Levelling Summary Report </option>
                            <option value="LevellingDetailedReport">Levelling Detailed Report </option>
                            <option value="ReceivedChartsReport">Received Charts Report </option>
                            <option value="PostedChartsReport">Posted Charts Report </option>
                        </select>
                    </div>
                    <br />
                    <div class="form-group row">
                        <div class="Report" id="LevellingSummaryReport" style="display:none;">
                            <form asp-action="GetLevellingReport" asp-controller="Home"
                                  data-ajax="true"
                                  data-ajax-method="POST"
                                  data-ajax-mode="replace"
                                  data-ajax-update="#modalContent">

                                <label for="fname">Select Project</label>
                                <div class="col-md-10">
                                    @Html.DropDownListFor(model => model.ProjectID, new SelectList(@ViewBag.Projects, "ProjectId", "Name"), "--Select--", new { @class = "form-control" })
                                    @Html.ValidationMessageFor(model => model.ProjectID, null, new { @class = "text-danger" })
                                </div>
                                <label for="fname">Start Date</label>
                                <div class="col-md-10">
                                    @Html.TextBoxFor(model => model.StartDate, new { @class = "form-control", @autocomplete = "off", @type = "date" })
                                    @Html.ValidationMessageFor(model => model.ProjectID, null, new { @class = "text-danger" })
                                </div>
                                <label for="fname">End Date </label>
                                <div class="col-md-10">
                                    @Html.TextBoxFor(model => model.EndDate, new { @class = "form-control", @autocomplete = "off", @type = "date" })
                                    @Html.ValidationMessageFor(model => model.ProjectID, null, new { @class = "text-danger" })
                                </div>
                                <div class="clearfix"></div><br />
                                <div class="col-md-3">
                                    <button type="submit" class="btn btn-success">Submit</button>
                                </div>
                            </form>
                        </div>
                        <div class="Report" id="ReceivedChartsReport" style="display:none;">
                            <form id="frmReport" asp-action="GetReceivedChartsReport" asp-controller="Home"
                                  data-ajax="true"
                                  data-ajax-method="POST"
                                  data-ajax-mode="replace"
                                  data-ajax-update="#modalContent">

                                <label for="fname">Select Project</label>
                                <div class="col-md-10">
                                    @Html.DropDownListFor(model => model.ProjectID, new SelectList(@ViewBag.Projects, "ProjectId", "Name"), "--Select--", new { @class = "form-control", @id = "ProjectID1" })
                                </div>
                                <label for="fname">Range</label>
                                <div class="col-md-10">
                                    @{var listItems = new List<SelectListItem>
                                                                                                                                                                                                                                                                                                                                                    {
          new SelectListItem { Text = "Per Day", Value="PerDay" },
          new SelectListItem { Text = "Per Week", Value="PerWeek" },
          new SelectListItem { Text = "Per Month", Value="PerMonth" }
    };
                                    }
                                    @Html.DropDownList("range", new SelectList(listItems, "Value", "Text"), new { @id = "rangeType" })
                                </div>
                                <div class="clearfix"></div><br />
                                <div class="col-md-3">
                                    <button type="button" onclick="ReceivedChartsList()" id="submitReceivedChartReport" class="btn btn-success">Submit</button>
                                </div>
                            </form>
                        </div>
                        <div class="Report" id="PostedChartsReport" style="display:none;">
                            <form id="postReport" asp-action="GetPostedChartsReport" asp-controller="Home"
                                  data-ajax="true"
                                  data-ajax-method="POST"
                                  data-ajax-mode="replace"
                                  data-ajax-update="#modalContent">

                                <label for="fname">Select Project</label>
                                <div class="col-md-10">
                                    @Html.DropDownListFor(model => model.ProjectID, new SelectList(@ViewBag.Projects, "ProjectId", "Name"), "--Select--", new { @class = "form-control", @id = "ProjectID2" })
                                </div>
                                <label for="fname">Range</label>
                                <div class="col-md-10">
                                    @{var listItems1 = new List<SelectListItem>
                                                                                                                                                                                                                                                                                                                                                    {
          new SelectListItem { Text = "Per Day", Value="PerDay" },
          new SelectListItem { Text = "Per Week", Value="PerWeek" },
          new SelectListItem { Text = "Per Month", Value="PerMonth" }
    };
                                    }
                                    @Html.DropDownList("range", new SelectList(listItems1, "Value", "Text"), new { @id = "rangeType1" })
                                </div>
                                <div class="clearfix"></div><br />
                                <div class="col-md-3">
                                    <button type="button" onclick="PostedChartsList()" id="submitPostedChartReport" class="btn btn-success">Submit</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <br /><br />
                    <div id="modalContent"></div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="~/dashboardassets/libs/jquery/dist/jquery.min.js"></script>
<script src="~/dashboardassets/libs/jquery-validation/dist/jquery.validate.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.11/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-ajax-unobtrusive/3.2.6/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
    //$("#submitReceivedChartReport").click(function () {
    //    $("#frmReport").submit();
    //});

    ReceivedChartsList = function () {

        var rangeType = $("#rangeType option:selected").val();
        var projectId = $("#ProjectID1 option:selected").val();

        if (projectId == "")
            projectId = 0;

            $.ajax({
                type: "GET",
                url: "@Url.Action("GetReceivedChartsReport", "Home")",
                data: {
                    "ProjectId": projectId,
                    "range": rangeType
                },
                success: function (response) {
                    $("#modalContent").html(response);
                },
                failure: function (response) {
                    alert(response);
                }
            });
        };

        PostedChartsList = function () {

        var rangeType = $("#rangeType1 option:selected").val();
        var projectId = $("#ProjectID2 option:selected").val();

        if (projectId == "")
            projectId = 0;

            $.ajax({
                type: "GET",
                url: "@Url.Action("GetPostedChartsReport", "Home")",
                data: {
                    "ProjectId": projectId,
                    "range": rangeType
                },
                success: function (response) {
                    $("#modalContent").html(response);
                },
                failure: function (response) {
                    alert(response);
                }
            });
        };

        $("#reportType").change(function () {

            var type = $("#reportType option:selected").val();

            $(".Report").hide();
            $("#modalContent").html('');
            $("#" + type).show();
        });
    });
</script>

