@model UAB.DTO.ChartSummaryDTO
@using UAB.enums
<style type="text/css">
    .col-md-3 {
        margin-left: 10px !important;
    }

    .form-control {
        padding: 0 !important;
    }
</style>
<div class="col-md-12">
    <div class="card">
        <div class="card-body">
            <h4 class="card-title"><span>Chart ID : <label style="color: black;">@Model.CodingDTO.ClinicalCaseID</label></span></h4>
        </div>
        @Html.HiddenFor(model => model.Dx)
        @Html.HiddenFor(model => model.ProjectName)
        @Html.HiddenFor(model => model.ProjectID)
        @Html.HiddenFor(model => model.CodingDTO.ClinicalCaseID, new { @id = "ccid" })

        <div class="form-group row">
            <label class="col-md-3 m-t-15">Provider</label>
            <div class="col-md-3">
                @Html.DropDownListFor(model => model.ProviderID, new SelectList(@ViewBag.Providers, "ID", "Name"), new { @class = "form-control CoderDetails" })
                @Html.ValidationMessageFor(model => model.ProviderID, null, new { @class = "text-danger" })
            </div>
            <label class="col-md-3 m-t-15">Payor</label>
            <div class="col-md-3">
                @Html.DropDownListFor(model => model.PayorID, new SelectList(@ViewBag.Payors, "ID", "Name"), "--Select--", new { @class = "form-control CoderDetails" })
                @Html.ValidationMessageFor(model => model.PayorID, null, new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group row">
            <label class="col-md-3 m-t-15">CPT</label>
            <div class="col-md-3">
                @Html.TextAreaFor(model => model.CPTCode, new { @class = "form-control CoderDetails", @autocomplete = "off" })
                @Html.ValidationMessageFor(model => model.CPTCode, null, new { @class = "text-danger" })
            </div>
            <label class="col-md-3 m-t-15">Note Title</label>
            <div class="col-md-3">
                @Html.TextAreaFor(model => model.NoteTitle, new { @class = "form-control CoderDetails", @autocomplete = "off" })
                @Html.ValidationMessageFor(model => model.NoteTitle, null, new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group row">
            <label class="col-md-3 m-t-15">Mod</label>
            <div class="col-md-3">
                @Html.TextAreaFor(model => model.Mod, new { @class = "form-control CoderDetails", @autocomplete = "off" })
                @Html.ValidationMessageFor(model => model.Mod, null, new { @class = "text-danger" })
            </div>
            <label class="col-md-3 m-t-15">Dx</label>
            <div class="col-md-3">
                @*@Html.TextAreaFor(model => model.Dx, new { @class = "form-control CoderDetails", @autocomplete = "off" })
                    @Html.ValidationMessageFor(model => model.Dx, null, new { @class = "text-danger" })*@
                <table>
                    <tbody id="tableid" style="display:block">
                        <tr id="tr0">
                            <td>
                                @Html.TextBoxFor(model => model.Dx, new { @class = "form-control CoderDetails", @autocomplete = "off", @id = "txt0", @title = "txt0" })
                                @Html.ValidationMessageFor(model => model.Dx, null, new { @class = "text-danger Dxerror" })
                            </td>
                            <td>
                                <input type="button" title="btn_0" id="btnDelete" class="btn btn-info btn-sm" value="Delete" />
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="form-group row">
            <label class="col-md-3 m-t-15"> Feedback to Provider</label>
            <div class="col-md-3">
                @Html.DropDownListFor(model => model.ProviderFeedbackID, new SelectList(@ViewBag.ProviderFeedbacks, "ID", "Name"), "--Select--", new { @class = "form-control CoderDetails" })
                @Html.ValidationMessageFor(model => model.ProviderFeedbackID, null, new { @class = "text-danger" })
            </div>
        </div>
        <div class="border-top">
            <div class="card-body" style="text-align:right">
                <a href="@Url.Action("GetCodingBlockedCharts","UAB",new {Role=Roles.Coder, ChartType= "Block", ProjectID=@Model.ProjectID, ProjectName=Model.ProjectName,ccid=Model.CodingDTO.ClinicalCaseID,plusorminus="Previous"})" class="btn btn-success Available" id="btnPrevious" style="display:none">Previous</a>
                <a href="@Url.Action("GetCodingBlockedCharts","UAB",new {Role=Roles.Coder, ChartType= "Block", ProjectID=@Model.ProjectID, ProjectName=Model.ProjectName,ccid=Model.CodingDTO.ClinicalCaseID,plusorminus="Next"})" class="btn btn-success Available" id="btnNext" style="display:none">Next</a>
                <button id="btnBlock" type="button" class="btn btn-danger" onclick="Block()">Block</button>
                <button id="btnBlockHistory" style="display:none" type="button" class="btn btn-danger" onclick="BlockHistory()">Block History</button>
                <button id="codingSubmit" name="codingSubmit" type="submit" class="btn btn-success Available">Save</button>
                <button id="codingSubmitAndGetNext" name="codingSubmitAndGetNext" type="submit" value="codingSubmitAndGetNext" class="btn btn-success Available">Save And GetNext</button>
                <button type="submit" class="btn btn-success Approved">Posting Completed</button>
                <button id="postingSubmitAndGetNext" name="postingSubmitAndGetNext" type="submit" value="postingSubmitAndGetNext" class="btn btn-success Approved">Post And GetNext</button>
                <a href="@Url.Action("CodingSummary","UAB")" class="btn btn-danger Approved">Close</a>
            </div>
        </div>
    </div>
</div>


<script src="~/dashboardassets/libs/jquery/dist/jquery.min.js"></script>
<script src="~/dashboardassets/libs/jquery-validation/dist/jquery.validate.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.11/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>
<script src="~/dashboardassets/extra-libs/DataTables/datatables.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        Block = function () {
            $.ajax({
                type: "GET",
                url: "@Url.Action("BlockClinicalcase", "UAB")",
                data: {"ccid": $("#ccid").val()},
                success: function (response) {
                    $("#modalContent").html(response);
                },
                failure: function (response) {
                    alert(response);
                }
            });
        };
        BlockHistory = function () {
            $.ajax({
                type: "GET",
                url: "@Url.Action("BlockHistory", "UAB")",
                data: {
                    "name": "@Model.BlockCategory",
                    "remarks": "@Model.BlockRemarks",
                    "createdate": "@Model.BlockedDate"
                    },
                success: function (response) {
                    $("#modalContent").html(response);
                },
                failure: function (response) {
                    alert(response);
                }
            });
        };
});
</script>

