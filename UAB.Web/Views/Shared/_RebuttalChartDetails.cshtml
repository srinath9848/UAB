@model List<UAB.DTO.ChartSummaryDTO>
@using UAB.enums
<div class="col-md-12">
    <div class="card">
        @Html.HiddenFor(model => model.FirstOrDefault().CodingDTO.ClinicalCaseID, new { @class = "form-control" })
        @Html.HiddenFor(model => model.FirstOrDefault().ProjectID)
        @Html.HiddenFor(model => model.FirstOrDefault().ProjectName)
        @Html.HiddenFor(model => model.FirstOrDefault().Dx)
        @Html.HiddenFor(model => model.FirstOrDefault().CPTCode)

        @Html.Hidden("hdnQADxRemarks")
        @Html.Hidden("hdnQADxCodes")
        @Html.Hidden("hdnQACptRemarks")
        @Html.Hidden("hdnQACptCodes")

        @Html.Hidden("hdnAcceptClaim1")
        @Html.Hidden("hdnQAAcceptDxCodes")
        @Html.Hidden("hdnQAAcceptCptCodes")

        @Html.Hidden("hdnClaim1")
        @Html.Hidden("hdnClaim2")
        @Html.Hidden("hdnClaim3")
        @Html.Hidden("hdnClaim4")

        @Html.Hidden("hdnClaimId1")
        @Html.Hidden("hdnClaimId2")
        @Html.Hidden("hdnClaimId3")
        @Html.Hidden("hdnClaimId4")

        @Html.Hidden("hdnAcceptClaim2")
        @Html.Hidden("hdnQAAcceptDxCodes2")
        @Html.Hidden("hdnQAAcceptCptCodes2")

        @Html.Hidden("hdnQADxRemarks2")
        @Html.Hidden("hdnQADxCodes2")
        @Html.Hidden("hdnQACptRemarks2")
        @Html.Hidden("hdnQACptCodes2")

        @Html.Hidden("hdnAcceptClaim3")
        @Html.Hidden("hdnQAAcceptDxCodes3")
        @Html.Hidden("hdnQAAcceptCptCodes3")

        @Html.Hidden("hdnQADxRemarks3")
        @Html.Hidden("hdnQADxCodes3")
        @Html.Hidden("hdnQACptRemarks3")
        @Html.Hidden("hdnQACptCodes3")

        @Html.Hidden("hdnAcceptClaim4")
        @Html.Hidden("hdnQAAcceptDxCodes4")
        @Html.Hidden("hdnQAAcceptCptCodes4")

        @Html.Hidden("hdnQADxRemarks4")
        @Html.Hidden("hdnQADxCodes4")
        @Html.Hidden("hdnQACptRemarks4")
        @Html.Hidden("hdnQACptCodes4")
        @Html.Hidden("hdnCurrDate")

        @Html.Hidden("hdnQAErrorTypeID1")
        @Html.Hidden("hdnQAErrorTypeID2")
        @Html.Hidden("hdnQAErrorTypeID3")
        @Html.Hidden("hdnQAErrorTypeID4")

        @Html.HiddenFor(model => model.FirstOrDefault().CCIDs)
        <input name="hdnCurrentCCId" type="hidden" value="@(ViewBag.CurrentCCId == null ? "0" : ViewBag.CurrentCCId)" />
        <input name="hdnIsBlocked" type="hidden" value="@(ViewBag.IsBlocked == null ? "0" : "1")" />


        <ul class="nav nav-tabs" role="tablist">
            @{
                int tabIndex = 1;
                foreach (var tabitem in Model)
                {
                    if (tabitem.ClaimId == null)
                        tabitem.ClaimId = 0;

                    var claimId = string.Format("tabIndex_{0}_ClaimId_{1}", tabIndex, tabitem.ClaimId);
                    if (tabitem.ClaimId == 0)
                    {
                        <li class="nav-item tabDiv1"> <a class="nav-link active tab" data-toggle="tab" id="@claimId" alt="tabDiv1" href="#claim1" role="tab"><span class="hidden-sm-up"></span> <span class="hidden-xs-down tabclick">Claim @tabIndex</span></a> </li>
                    }
                    else
                    {
                        <li class="@string.Format("nav-item tabDiv{0}", tabIndex)" style="display:inherit;"> <a class="nav-link tab" data-toggle="tab" id="@claimId" alt="tabDiv2" href="@string.Format("#claim{0}", tabIndex)" role="tab"> <span class="hidden-sm-up"></span> <span class="hidden-xs-down tabclick">Claim @tabIndex</span></a></li>
                    }
                    tabIndex = tabIndex + 1;
                }
            }
        </ul>
        <div class="tab-content tabcontent-border">
            @{
                tabIndex = 1;
                foreach (var tabitem in Model)
                {
                    tabitem.TabIndex = tabIndex;
                    if (tabitem.ClaimId == null)
                        tabitem.ClaimId = 0;

                    if (tabitem.ClaimId == 0)
                    {
                        <div class="tab-pane active" id="claim1" role="tabpanel">
                            <div class="p-20" id="tabDiv1">
                                <br />
                                <div class="form-group row">
                                    <label class="col-md-2 m-t-15"></label>
                                    <div class="custom-control custom-checkbox mr-sm-2" id="divChkAll_@tabIndex">
                                        <input type="checkbox" class="custom-control-input ShadowQADetails" id="chkAll_@tabIndex" onclick="CheckAllboxes('chkAll_@tabIndex')">
                                        <label class="custom-control-label" for="chkAll_@tabIndex">Accept All</label>
                                    </div>
                                    <label class="col-md-3 lessWidth m-t-15"></label>
                                    <div class="custom-control mr-sm-2 QACorrectionsComments" style="display:none;">
                                        <label class="">QA Corrections</label>
                                    </div>
                                    <label class="col-md-3 lessWidth m-t-15"></label>
                                    <div class="custom-control mr-sm-2 QACorrectionsComments" style="display:none;">
                                        <label class="">QA Comments</label>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-md-3 lessWidth m-t-15">Provider</label>
                                    @{ int len = ((!string.IsNullOrEmpty(Model.FirstOrDefault().QAProviderText) && !Model.FirstOrDefault().ProviderText.Equals(Model.FirstOrDefault().QAProviderText)) ? 10 : 20); }
                                    @{string ProviderText = (Model.FirstOrDefault().ProviderText?.Length > len) ? Model.FirstOrDefault().ProviderText.Substring(0, len) + ".." : Model.FirstOrDefault().ProviderText;}
                                    @{string QAProviderText = (Model.FirstOrDefault().QAProviderText?.Length > len) ? "/" + Model.FirstOrDefault().QAProviderText.Substring(0, len) + ".." : "/" + Model.FirstOrDefault().QAProviderText;}
                                    @{string title = (!string.IsNullOrEmpty(Model.FirstOrDefault().QAProviderText) ? Model.FirstOrDefault().ProviderText + "/" + Model.FirstOrDefault().QAProviderText : Model.FirstOrDefault().ProviderText);}
                                    <div title="@title" class="col-md-3 input-group">
                                        @{string Accepted = (string.IsNullOrEmpty(Model.FirstOrDefault().QAProviderRemarks) ? "fa fa-check-circle fa-lg accept" : "fa fa-check-circle fa-lg");}
                                        @{string Rejected = (string.IsNullOrEmpty(Model.FirstOrDefault().QAProviderRemarks) ? "fa fa-times-circle fa-lg" : "fa fa-times-circle fa-lg reject");}

                                        @Html.DropDownListFor(model => model.FirstOrDefault().ProviderID, new SelectList(@ViewBag.Providers, "ID", "Name"), "--Select--", new { @class = "form-control CoderDetails ControlHeight", @id = string.Format("CoderProviderID_{0}", tabIndex) })
                                        <div class="input-group-append QACorrections ControlHeight">
                                            <span class="input-group-text AcceptRejectWidth_@tabIndex">
                                                &nbsp;<i id="ProviderID_@tabIndex" data="@tabIndex" class="@Accepted AdjustAcceptReject_@tabIndex" aria-hidden="true"></i>
                                                &nbsp;<i id="ProviderID_@tabIndex" data="@tabIndex" class="@Rejected AdjustReject_@tabIndex" aria-hidden="true"></i>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="col-md-3 input-group">
                                        @Html.DropDownListFor(model => model.FirstOrDefault().QAProviderID, new SelectList(@ViewBag.Providers, "ID", "Name"), "--Select--", new { @class = string.Format("form-control QARevised ControlHeight ProviderID_{0}", tabIndex), @style = (Model.FirstOrDefault().QAProviderID == 0 ? "display:none" : "display:flex"), @id = string.Format("QAProviderID_{0}", tabIndex) })
                                        @Html.ValidationMessageFor(model => model.FirstOrDefault().QAProviderID, null, new { @class = "text-danger errMsg" })
                                    </div>
                                    @{string Show = (string.IsNullOrEmpty(Model.FirstOrDefault().QAProviderRemarks) ? "display:none" : "display:flex");}
                                    <div class="col-md-3 input-group">
                                        @Html.TextBoxFor(model => model.FirstOrDefault().QAProviderRemarks, new { @title = Model.FirstOrDefault().QAProviderRemarks, @style = Show, @class = string.Format("form-control QARevised ControlHeight ProviderID_{0}", tabIndex), @id = string.Format("QAProviderIDRemarks_{0}", tabIndex) })
                                        @Html.ValidationMessageFor(model => model.FirstOrDefault().QAProviderRemarks, null, new { @class = "text-danger errMsg" })
                                        <span id="validProvider_@Model.FirstOrDefault().TabIndex" class="text-danger txtdanger" style="display:none">*</span>
                                    </div>
                                </div>
                                @if (Model.FirstOrDefault().ProjectTypename.ToUpper() != "IP")
                                {
                                    <div class="form-group row">
                                        <label class="col-md-3 lessWidth m-t-15">Billing Provider</label>
                                        <div title="@Model.FirstOrDefault().BillingProviderText" class="col-md-3 input-group">
                                            @Html.DropDownListFor(model => model.FirstOrDefault().BillingProviderID, new SelectList(@ViewBag.Providers, "ID", "Name"), "--Select--", new { @class = "form-control CoderDetails ControlHeight", @id = string.Format("CoderBillingProviderID_{0}", tabIndex) })
                                            <div class="input-group-append QACorrections ControlHeight">
                                                <span class="input-group-text AcceptRejectWidth_@tabIndex">
                                                    &nbsp;<i id="BillingProviderID_@tabIndex" data="@tabIndex" class="fa fa-check-circle fa-lg AdjustAcceptReject_@tabIndex" aria-hidden="true"></i>
                                                    &nbsp;<i id="BillingProviderID_@tabIndex" data="@tabIndex" class="fa fa-times-circle fa-lg AdjustReject_@tabIndex" aria-hidden="true"></i>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="col-md-3 input-group">
                                            @Html.DropDownListFor(model => model.FirstOrDefault().QABillingProviderID, new SelectList(@ViewBag.Providers, "ID", "Name"), "--Select--", new { @class = string.Format("form-control QARevised ControlHeight BillingProviderID_{0}", tabIndex), @style = "display:none", @id = string.Format("QABillingProviderID_{0}", tabIndex) })
                                            @Html.ValidationMessageFor(model => model.FirstOrDefault().QABillingProviderID, null, new { @class = "text-danger errMsg" })
                                        </div>
                                        <div class="col-md-3 input-group">
                                            @Html.TextBoxFor(model => model.FirstOrDefault().QABillingProviderRemarks, new { @title = Model.FirstOrDefault().QABillingProviderRemarks, @style = "display:none", @class = string.Format("form-control QARevised ControlHeight BillingProviderID_{0}", tabIndex), @id = string.Format("QABillingProviderIDRemarks_{0}", tabIndex) })
                                            @Html.ValidationMessageFor(model => model.FirstOrDefault().QABillingProviderRemarks, null, new { @class = "text-danger errMsg" })
                                            <span id="validBillingProvider_@Model.FirstOrDefault().TabIndex" class="text-danger txtdanger" style="display:none">*</span>
                                        </div>
                                    </div>
                                }
                                <div class="form-group row">
                                    <label class="col-md-3 lessWidth m-t-15">Payor</label>
                                    @{ len = ((!string.IsNullOrEmpty(Model.FirstOrDefault().QAPayorText) && !Model.FirstOrDefault().PayorText.Equals(Model.FirstOrDefault().QAPayorText)) ? 10 : 20); }
                                    @{string PayorText = (Model.FirstOrDefault().PayorText?.Length > len) ? Model.FirstOrDefault().PayorText.Substring(0, len) + ".." : Model.FirstOrDefault().PayorText;}
                                    @{string QAPayorText = (Model.FirstOrDefault().QAPayorText?.Length > len) ? "/" + Model.FirstOrDefault().QAPayorText.Substring(0, len) + ".." : "/" + Model.FirstOrDefault().QAPayorText;}
                                    @{title = (!string.IsNullOrEmpty(Model.FirstOrDefault().QAPayorText) ? Model.FirstOrDefault().PayorText + "/" + Model.FirstOrDefault().QAPayorText : Model.FirstOrDefault().PayorText);}
                                    <div title="@title" class="col-md-3 input-group">
                                        @{Accepted = (string.IsNullOrEmpty(Model.FirstOrDefault().QAPayorRemarks) ? "fa fa-check-circle fa-lg accept" : "fa fa-check-circle fa-lg");}
                                        @{Rejected = (string.IsNullOrEmpty(Model.FirstOrDefault().QAPayorRemarks) ? "fa fa-times-circle fa-lg" : "fa fa-times-circle fa-lg reject");}

                                        @Html.DropDownListFor(model => model.FirstOrDefault().PayorID, new SelectList(@ViewBag.Payors, "ID", "Name"), "--Select--", new { @class = "form-control CoderDetails ControlHeight", @id = string.Format("CoderPayorID_{0}", tabIndex) })
                                        <div class="input-group-append QACorrections ControlHeight">
                                            <span class="input-group-text AcceptRejectWidth_@tabIndex">
                                                &nbsp;<i id="PayorID_@tabIndex" data="@tabIndex" class="@Accepted AdjustAcceptReject_@tabIndex" aria-hidden="true"></i>
                                                &nbsp;<i id="PayorID_@tabIndex" data="@tabIndex" class="@Rejected AdjustReject_@tabIndex" aria-hidden="true"></i>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="col-md-3 input-group">
                                        @Html.DropDownListFor(model => model.FirstOrDefault().QAPayorID, new SelectList(@ViewBag.Payors, "ID", "Name"), "--Select--", new { @class = string.Format("form-control QARevised ControlHeight PayorID_{0}", tabIndex), @style = (Model.FirstOrDefault().QAPayorID == 0 ? "display:none" : "display:flex"), @id = string.Format("QAPayorID_{0}", tabIndex) })
                                        @Html.ValidationMessageFor(model => model.FirstOrDefault().QAPayorID, null, new { @class = "text-danger errMsg" })
                                    </div>
                                    @{Show = (string.IsNullOrEmpty(Model.FirstOrDefault().QAPayorRemarks) ? "display:none" : "display:flex");}
                                    <div class="col-md-3 input-group">
                                        @Html.TextBoxFor(model => model.FirstOrDefault().QAPayorRemarks, new { @title = Model.FirstOrDefault().QAPayorRemarks, @style = Show, @class = string.Format("form-control QARevised ControlHeight PayorID_{0}", tabIndex), @id = string.Format("QAPayorIDRemarks_{0}", tabIndex) })
                                        @Html.ValidationMessageFor(model => model.FirstOrDefault().QAPayorRemarks, null, new { @class = "text-danger errMsg" })
                                        <span id="validPayor_@Model.FirstOrDefault().TabIndex" class="text-danger txtdanger" style="display:none">*</span>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-md-3 lessWidth m-t-15">Note Title</label>
                                    <div title="@Model.FirstOrDefault().NoteTitle" class="col-md-3">
                                        @Html.TextBoxFor(model => model.FirstOrDefault().NoteTitle, new { @class = "form-control CoderDetails ControlHeight" })
                                    </div>
                                </div>
                                <div id="DivDx">
                                    @{
                                        int i = 1;

                                        int totalDxCount = Model.FirstOrDefault().Dx.Split(",").Count() + 1;
                                        foreach (var item in Model.FirstOrDefault().Dx.Split(","))
                                        {
                                            <div class="form-group row">
                                                @if (i == 1)
                                                {
                                                    <label class="col-md-3 lessWidth m-t-15">Dx</label>
                                                }
                                                else
                                                {
                                                    <label class="col-md-3 lessWidth m-t-15"></label>
                                                }
                                                <div title="@item" class="col-md-3 input-group">
                                                    <div class="input-group-prepend ControlHeight">
                                                        <span class="input-group-text AdjustSerialNumber" id="basic-addon1">@i</span>
                                                    </div>
                                                    <input class="form-control CoderDetails ControlHeight valid" type="text" value="@item">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text AcceptRejectWidth_@tabIndex QACorrections ControlHeight">
                                                            &nbsp;<i id="Dx_@i" data="@tabIndex" class="fa fa-check-circle fa-lg AdjustAcceptReject_@tabIndex" aria-hidden="true"></i>
                                                            &nbsp;<i id="Dx_@i" data="@tabIndex" class="fa fa-times-circle fa-lg AdjustReject_@tabIndex" aria-hidden="true"></i>
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="col-md-3 QADxRevised_@tabIndex input-group Dx_@i" style="display:none">
                                                    <div class="input-group-prepend ControlHeight">
                                                        <span class="input-group-text dxindex AdjustSerialNumber" id="basic-addon1">@i</span>
                                                    </div>
                                                    <input type="hidden" class="txtQADx_@i" value="@item" />
                                                    <input type="text" id="txtDx_@i" class="form-control ControlHeight txtDx Dx_@i" autocomplete="off" placeholder="Code" value="@item" style="display:none" />
                                                </div>
                                                <div class="col-md-3 input-group">
                                                    <input type="text" id="DxRemarks_@i" class="form-control QADxRevised_@tabIndex ControlHeight DxRemarks_@i Dx_@i" onchange="removevalid('Dx_@i')" style="display:none" />
                                                    <span id="validDx_@i" class="text-danger txtdanger" style="display:none">*</span>
                                                </div>
                                            </div>

                                            i = i + 1;
                                        }
                                    }

                                    <div class="form-group row">
                                        <label class="col-md-3 lessWidth m-t-15"></label>
                                        <div class="col-md-3 input-group">
                                            <div class="input-group-prepend ControlHeight">
                                                <span class="input-group-text AdjustSerialNumber" id="basic-addon1">@totalDxCount</span>
                                            </div>
                                            <input class="form-control CoderDetails ControlHeight valid" type="text" value="">
                                            <div class="input-group-append">
                                                <span class="input-group-text QACorrections ControlHeight AcceptRejectWidth_@tabIndex">
                                                    &nbsp;<i data="@tabIndex" class="fa fa-edit fa-lg AdjustAcceptReject" aria-hidden="true" style="visibility:hidden"></i>
                                                    &nbsp;<i id="Dx_@totalDxCount" data="@tabIndex" class="fa fa-times-circle fa-lg ignore " aria-hidden="true"></i>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="col-md-3 QADxRevised_@tabIndex newlyDxCpt_@tabIndex input-group Dx_@totalDxCount" style="display:none">
                                            <div class="input-group-prepend ControlHeight">
                                                <span class="input-group-text dxindex AdjustSerialNumber" id="basic-addon1">@totalDxCount</span>
                                            </div>
                                            <input type="text" id="txtDx_@totalDxCount" class="form-control ControlHeight txtDx Dx_@totalDxCount" autocomplete="off" placeholder="Code" onfocusout="DxFunction('txtDx_@totalDxCount')" value="" style="display:none" />
                                        </div>
                                        <div class="col-md-3 QADxRevised_@tabIndex input-group Dx_@totalDxCount" style="display:none">
                                            <input type="text" id="DxRemarks_@i" class="form-control QADxRevised_@i ControlHeight DxRemarks_@totalDxCount Dx_@i Dx_@i" onchange="removevalid('Dx_@i')" style="display:none" />
                                            <span id="validDx_@i" class="text-danger txtdanger" style="display:none">*</span>
                                        </div>
                                    </div>
                                </div>
                                <div id="DivCpt">
                                    @{
                                        i = 1;
                                        int totalCptCount = Model.FirstOrDefault().CPTCode.Split("|").Count() + 1;
                                        foreach (var item in Model.FirstOrDefault().CPTCode.Split("|"))
                                        {
                                            string[] cptCodes = item.Split("^");
                                            string cptVal = cptCodes[0] == "NA" ? "" : cptCodes[0];
                                            string modVal = cptCodes[1] == "null" ? "" : cptCodes[1];
                                            string qtyVal = cptCodes[2];
                                            string linkAllVal = cptCodes[3] == "null" ? "" : cptCodes[3];
                                            <div class="form-group row" id="DivCptRow_@i">
                                                @if (i == 1)
                                                {
                                                    <label class="col-md-3 lessWidth m-t-15">CPT</label>
                                                }
                                                else
                                                {
                                                    <label class="col-md-3 lessWidth m-t-15"></label>
                                                }
                                                @{string link = !string.IsNullOrEmpty(@linkAllVal) || @linkAllVal != "null" || @linkAllVal != "" ? @linkAllVal : "Link All"; }
                                                <div title="Code : @cptVal, Mod : @modVal, Quantity : @qtyVal, Links : @link" class="col-md-3 CptlessWidth input-group">
                                                    <div class="input-group-prepend ControlHeight">
                                                        <span class="input-group-text cptindex AdjustSerialNumber" id="basic-addon1">@i</span>
                                                    </div>
                                                    <input type="text" maxlength="5" style="min-width:50px;" class="form-control CoderDetails ControlHeight" autocomplete="off" placeholder="Code" value="@cptVal" />
                                                    <input type="text" style="min-width:42px;" class="form-control CoderDetails ControlHeight" autocomplete="off" placeholder="Mod" value="@modVal" />
                                                    <input type="text" style="max-width:23px;" class="form-control CoderDetails ControlHeight cptQtyClaim" autocomplete="off" placeholder="Qty" value="@qtyVal" />
                                                    <input type="text" class="form-control CoderDetails ControlHeight cptLinksClaim" autocomplete="off" placeholder="Link All" value="@linkAllVal" />
                                                    <div class="input-group-append ControlHeight">
                                                        <span class="input-group-text AcceptRejectWidth_@tabIndex">
                                                            &nbsp;<i id="Cpt_@i" data="@tabIndex" class="fa fa-check-circle fa-lg AdjustAcceptReject_@tabIndex" aria-hidden="true"></i>
                                                            &nbsp;<i id="Cpt_@i" data="@tabIndex" class="fa fa-times-circle fa-lg AdjustReject_@tabIndex" aria-hidden="true"></i>
                                                        </span>
                                                    </div>
                                                </div>
                                                <input type="hidden" class="txtQACpt_@i" value="@cptVal^@modVal^@qtyVal^@linkAllVal" />
                                                <div class="col-md-3 QACptRevised_@tabIndex CptlessWidth input-group Cpt_@i" style="display:none">
                                                    <div class="input-group-prepend ControlHeight">
                                                        <span class="input-group-text cptindex AdjustSerialNumber" id="basic-addon1">@i</span>
                                                    </div>
                                                    <input type="text" maxlength="5" style="min-width:50px;" class="form-control ControlHeight" id="txtCpt_@i" autocomplete="off" placeholder="Code" value="@cptVal" />
                                                    <input type="text" style="min-width:42px;" class="form-control ControlHeight" id="txtMod_@i" autocomplete="off" placeholder="Mod" value="@modVal" />
                                                    <input type="text" style="max-width:23px;" class="form-control ControlHeight cptQtyClaim" id="txtQty_@i" autocomplete="off" placeholder="Qty" value="@qtyVal" />
                                                    <input type="text" class="form-control ControlHeight cptLinksClaim txtLinks" id="txtLinks_@i" autocomplete="off" placeholder="Link All" value="@linkAllVal" />
                                                </div>

                                                <div class="col-md-3 input-group">
                                                    <input type="text" id="CptRemarks_@i" class="form-control QACptRevised_@tabIndex ControlHeight CptRemarks_@i Cpt_@i" onchange="removevalid('Cpt_@i')" style="display:none" />
                                                    <span id="validCpt_@i" class="text-danger txtdanger" style="display:none">*</span>
                                                </div>
                                            </div>
                                            i = i + 1;
                                        }
                                    }
                                    <div class="form-group row" id="DivCptRow_@totalCptCount">
                                        <label class="col-md-3 lessWidth m-t-15"></label>
                                        <div class="col-md-3 CptlessWidth input-group">
                                            <div class="input-group-prepend ControlHeight">
                                                <span class="input-group-text AdjustSerialNumber" id="basic-addon1">@totalCptCount</span>
                                            </div>
                                            <input type="text" maxlength="5" style="min-width:50px;" class="form-control CoderDetails ControlHeight" autocomplete="off" placeholder="Code" value="" />
                                            <input type="text" style="min-width:42px;" class="form-control CoderDetails ControlHeight" autocomplete="off" placeholder="Mod" value="" />
                                            <input type="text" style="max-width:23px;" class="form-control CoderDetails cptQtyClaim ControlHeight" autocomplete="off" placeholder="Qty" value="" />
                                            <input type="text" class="form-control CoderDetails ControlHeight cptLinksClaim" autocomplete="off" placeholder="Link All" value="" />
                                            <div class="input-group-append ControlHeight">
                                                <span class="input-group-text AcceptRejectWidth_@tabIndex">
                                                    &nbsp;<i data="@tabIndex" class="fa fa-edit fa-lg AdjustAcceptReject" aria-hidden="true" style="visibility:hidden"></i>
                                                    &nbsp;<i id="Cpt_@totalCptCount" data="@tabIndex" class="fa fa-times-circle fa-lg ignore" aria-hidden="true"></i>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="col-md-3 QACptRevised_@tabIndex newlyDxCpt_@tabIndex CptlessWidth input-group Cpt_@totalCptCount" style="display:none">
                                            <div class="input-group-prepend ControlHeight">
                                                <span class="input-group-text AdjustSerialNumber" id="basic-addon1">@totalCptCount</span>
                                            </div>
                                            <input type="text" maxlength="5" style="min-width:50px;" class="form-control ControlHeight" id="txtCpt_@totalCptCount" autocomplete="off" placeholder="Code" value="" />
                                            <input type="text" style="min-width:42px;" class="form-control ControlHeight" id="txtMod_@totalCptCount" autocomplete="off" placeholder="Mod" value="" />
                                            <input type="text" style="max-width:23px;" class="form-control ControlHeight cptQtyClaim" id="txtQty_@totalCptCount" autocomplete="off" placeholder="Qty" value="1" />
                                            <input type="text" class="form-control ControlHeight txtLinks cptLinksClaim" id="txtLinks_@totalCptCount" autocomplete="off" placeholder="Link All" onfocusout="CptFunction('txtLinks_@totalCptCount+')" />
                                        </div>
                                        <div class="col-md-3 input-group Cpt_@totalCptCount" id="CptRemarks_@i" style="display:none">
                                            <input type="text" id="CptRemarks_@i" class="form-control QACptRevised_@tabIndex ControlHeight CptRemarks_@i Cpt_@i" style="display:none" />
                                            <span id="validCpt_@i" class="text-danger txtdanger" style="display:none">*</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-md-3 lessWidth m-t-15">Provider Feedback</label>
                                    @{ len = ((!string.IsNullOrEmpty(Model.FirstOrDefault().QAProviderFeedbackText) && !Model.FirstOrDefault().ProviderFeedbackText.Equals(Model.FirstOrDefault().QAProviderFeedbackText)) ? 10 : 20); }
                                    @{string ProviderFeedbackText = (Model.FirstOrDefault().ProviderFeedbackText?.Length > len) ? Model.FirstOrDefault().ProviderFeedbackText.Substring(0, len) + ".." : Model.FirstOrDefault().ProviderFeedbackText;}
                                    @{string QAProviderFeedbackText = (Model.FirstOrDefault().QAProviderFeedbackText?.Length > len) ? "/" + Model.FirstOrDefault().QAProviderFeedbackText.Substring(0, len) + ".." : "/" + Model.FirstOrDefault().QAProviderFeedbackText;}
                                    @{title = (!string.IsNullOrEmpty(Model.FirstOrDefault().QAProviderFeedbackText) ? Model.FirstOrDefault().ProviderFeedbackText + "/" + Model.FirstOrDefault().QAProviderFeedbackText : Model.FirstOrDefault().ProviderFeedbackText);}
                                    <div title="@title" class="col-md-3 input-group">
                                        @{ Accepted = (string.IsNullOrEmpty(Model.FirstOrDefault().QAProviderFeedbackRemarks) ? "fa fa-check-circle fa-lg accept" : "fa fa-check-circle fa-lg");}
                                        @{ Rejected = (string.IsNullOrEmpty(Model.FirstOrDefault().QAProviderFeedbackRemarks) ? "fa fa-times-circle fa-lg" : "fa fa-times-circle fa-lg reject");}

                                        @Html.DropDownListFor(model => model.FirstOrDefault().ProviderFeedbackID, new SelectList(@ViewBag.ProviderFeedbacks, "ID", "Name"), "--Select--", new { @class = "form-control CoderDetails ControlHeight", @id = string.Format("CoderFeedback_{0}", tabIndex) })
                                        <div class="input-group-append ControlHeight">
                                            <span class="input-group-text AcceptRejectWidth_@tabIndex QACorrections">
                                                &nbsp;<i id="Feedback_@tabIndex" data="@tabIndex" class="@Accepted AdjustAcceptReject_@tabIndex" aria-hidden="true"></i>
                                                &nbsp;<i id="Feedback_@tabIndex" data="@tabIndex" class="@Rejected AdjustReject_@tabIndex" aria-hidden="true"></i>
                                            </span>
                                        </div>
                                    </div>
                                    @{Show = (string.IsNullOrEmpty(Model.FirstOrDefault().QAProviderFeedbackRemarks) ? "display:none" : "display:flex");}
                                    <div class="col-md-3 input-group">
                                        @Html.DropDownListFor(model => model.FirstOrDefault().QAProviderFeedbackID, new SelectList(@ViewBag.ProviderFeedbacks, "ID", "Name"), "--Select--", new { @style = Show, @class = string.Format("form-control QARevised ControlHeight Feedback_{0}", tabIndex), @id = string.Format("QAProviderFeedback_{0}", tabIndex) })
                                        @Html.ValidationMessageFor(model => model.FirstOrDefault().QAProviderFeedbackID, null, new { @class = "text-danger errMsg" })
                                    </div>
                                    <div class="col-md-3 input-group">
                                        @Html.TextBoxFor(model => model.FirstOrDefault().QAProviderFeedbackRemarks, new { @title = Model.FirstOrDefault().QAProviderFeedbackRemarks, @style = Show, @class = string.Format("form-control QARevised ControlHeight Feedback_{0}", tabIndex), @id = string.Format("QAProviderFeedbackRemarks_{0}", tabIndex) })
                                        @Html.ValidationMessageFor(model => model.FirstOrDefault().QAProviderFeedbackRemarks, null, new { @class = "text-danger errMsg" })
                                        <span id="validFeedback_@Model.FirstOrDefault().TabIndex" class="text-danger txtdanger" style="display:none">*</span>
                                    </div>
                                </div>
                            </div>

                            <div class="clearfix"></div>
                            <div class="card">
                                <div class="card-body">
                                    <h4 class="card-title">QA Details</h4>
                                </div>
                                <div class="card-body">
                                    <div class="col-12">
                                        <div class="row mb-3">
                                            <div class="col-lg-6">
                                                <div class="form-group row">
                                                    <label class="col-md-3 m-t-15">
                                                        Error Type
                                                    </label>
                                                    <div class="col-md-7">
                                                        @Html.DropDownListFor(model => model.FirstOrDefault().QADTO.ErrorType, new SelectList(@ViewBag.ErrorTypes, "ID", "Name"), "--Select--", new { @class = "form-control ControlHeight", @id = string.Format("ErrorType_{0}", tabIndex), @onchange = "ErrorType('" + tabIndex + "')" })
                                                        @Html.ValidationMessageFor(model => model.FirstOrDefault().QADTO.ErrorType, null, new { @class = "text-danger ErrorType", @id = string.Format("ErrorTypeError_{0}", tabIndex) })
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="form-group row">
                                                    @*<label class="col-md-5 m-t-15"></label>*@
                                                    <div class="col-md-15">
                                                        <a href="@Url.Action("GetBlockedChart", "UAB", new { Role = Roles.QA, ChartType = "Block", ProjectID = @Model.FirstOrDefault().ProjectID, ProjectName = Model.FirstOrDefault().ProjectName, ccids = Model.FirstOrDefault().CCIDs, Previous = "1",CurrCCId = ViewBag.CurrentCCId })" class="clsPrevious btn btn-success Available" id="btnPrevious" style="opacity: 0.65; pointer-events: none">Previous</a>
                                                        <a href="@Url.Action("GetBlockedChart", "UAB", new { Role = Roles.QA, ChartType = "Block", ProjectID = @Model.FirstOrDefault().ProjectID, ProjectName = Model.FirstOrDefault().ProjectName, ccids = Model.FirstOrDefault().CCIDs, Next = "1",CurrCCId = ViewBag.CurrentCCId })" class="clsNext btn btn-success Available" id="btnNext" style="opacity: 0.65; pointer-events: none">Next</a>
                                                        <button id="btnBlock" type="button" class="clsbtnBlock btn btn-danger" onclick="Block()">Block</button>
                                                        <button id="btnBlockHistory" style="display:none" type="button" class="clsbtnBlockHistory btn btn-danger" onclick="BlockHistory()">Block History</button>
                                                        <button id="btnsubmit" type="button" class="btn btn-success">Save</button>
                                                        <button id="SubmitAndGetNext" name="SubmitAndGetNext" type="submit" value="SubmitAndGetNext" class="btn btn-success Available">Save And GetNext</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                    else
                    {
                        <div class="tab-pane" id="@string.Format("claim{0}", tabIndex)" role="tabpanel">
                            <div class="p-20" id="@string.Format("tabDiv{0}", tabIndex)">
                                <partial name="_QAClaim" model=tabitem />
                            </div>
                        </div>
                    }
                    tabIndex = tabIndex + 1;
                }
            }
        </div>
    </div>
</div>

<style>
    .errMsg {
        font-weight: bold;
        font-size: 20px;
    }

    #sortable-1 {
        list-style-type: none;
        margin: 0;
        padding: 0;
        width: 25%;
    }

    /*     #sortable-1 li {
                    margin: 0 3px 3px 3px;
                    padding: 0.4em;
                    padding-left: 1.5em;
                    font-size: 17px;
                    height: 16px;
                }*/

    .default {
        background: #cedc98;
        border: 1px solid #DDDDDD;
        color: #333333;
    }

    .custom-control-label:before {
        left: -35px;
    }

    .custom-control-label:after {
        left: -35px;
    }

    .custom-control {
        padding-left: 0rem;
    }

    div.CptlessWidth {
        max-width: 20% !important;
    }

    .ControlHeight {
        height: 32px !important;
    }

    .AcceptRejectWidth_@tabIndex {
        max-width: 50px;
    }

    .AdjustAcceptReject_@tabIndex {
        margin-left: -13px;
    }

    .AdjustSerialNumber {
        max-width: 25px;
        padding-left: 5px;
    }
</style>
<script src="~/dashboardassets/libs/jquery/dist/jquery.min.js"></script>
<script type="text/javascript">
    $("#PayorID1").attr('title', $("#PayorID1 option:selected").text());
    $("#ProviderID").attr('title', $("#ProviderID option:selected").text());
    $("#ProviderFeedbackID").attr('title', $("#ProviderFeedbackID option:selected").text());

    $(document).ready(function () {
        $('#txtQty_1,#txtLinks_1,.cptQtyClaim,.cptLinksClaim').on('keyup keypress change', function (e) {
            this.value = this.value.replace(/[^0-9\.]/g, '');
        });

        Block = function () {
            $.ajax({
                type: "GET",
                url: "@Url.Action("BlockClinicalcase", "UAB")",
                data: {"ccid": @Model.FirstOrDefault().CodingDTO.ClinicalCaseID},
                success: function (response) {
                    $("#modalContent").html(response);
                },
                failure: function (response) {
                    alert(response);
                }
            });
        };
        BlockHistory = function () {
             var data = JSON.parse('@Html.Raw(Json.Serialize(Model.FirstOrDefault().blockHistories))');

            $.ajax({
                type: "POST",
                url: "@Url.Action("BlockHistory", "UAB")",
                data: JSON.stringify(data),
                contentType: "application/json; charset=utf-8",
                success: function (response) {
                    $("#modalContent").html(response);
                },
                failure: function (response) {
                    alert(response);
                }
            });
        };
});


</script>
