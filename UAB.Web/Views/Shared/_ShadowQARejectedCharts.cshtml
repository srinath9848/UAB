@model UAB.DTO.ChartSummaryDTO
<div class="col-md-12">
    <div class="card">
        <div class="card-body">
            <h4 class="card-title">
                <span>Chart ID : <label style="color: black;">@Model.CodingDTO.ClinicalCaseID &nbsp;&nbsp;&nbsp;&nbsp;</label></span>
                @if (Model.CodedBy != null)
                {
                    <span>Coded by :  <label style="color:black;">@Model.CodedBy&nbsp;&nbsp;&nbsp;&nbsp;</label></span>
                }
                @if (Model.QABy != null)
                {
                    <span>
                        QA by : <label style="color:black;"> @Model.QABy &nbsp;&nbsp;&nbsp;&nbsp;</label>
                    </span>
                }
                @if (Model.ShadowQABy != null)
                {
                    <span>
                        ShadowQA by : <label style="color:black;"> @Model.ShadowQABy </label>
                    </span>
                }

            </h4>
        </div>
        @Html.HiddenFor(model => model.CodingDTO.ClinicalCaseID, new { })
        @Html.Hidden("hdnPayorID")
        @Html.Hidden("hdnProviderID")
        @Html.Hidden("hdnCpt")
        @Html.Hidden("hdnMod")
        @Html.Hidden("hdnDx")
        @Html.Hidden("hdnProviderFeedbackID")

        @Html.Hidden("hdnPayorIDReject")
        @Html.Hidden("hdnProviderIDReject")
        @Html.Hidden("hdnCptReject")
        @Html.Hidden("hdnModReject")
        @Html.Hidden("hdnDxReject")
        @Html.Hidden("hdnProviderFeedbackIDReject")

        <div class="form-group row">
            <label class="col-md-3 lessWidth m-t-15"></label>
            <label class="col-md-3 lessWidth m-t-15">Coder/QA</label>
            <div class="input-group-append CoderCorrections" style="visibility:hidden">
                <span class="input-group-text">
                    &nbsp;<i class="fa fa-save fa-lg" aria-hidden="true"></i>
                    &nbsp;<i class="fa fa-save fa-lg" aria-hidden="true"></i>
                </span>
            </div>
            <label class="col-md-3 m-t-15">QA Comments</label>
            <label class="col-md-3 lessWidth m-t-15">ShadowQA Corrections</label>
            <label class="col-md-3 m-t-15">ShadowQA Comments</label>
        </div>
        <div class="form-group row">
            <label class="col-md-3 lessWidth m-t-15">Payor</label>
            @{int len = (!string.IsNullOrEmpty(Model.QAPayorText) ? 10 : 20); }
            @{string PayorText = (Model.PayorText?.Length > len) ? Model.PayorText.Substring(0, len) + ".." : Model.PayorText;}
            @{string QAPayorText = (Model.QAPayorText?.Length > len) ? "/" + Model.QAPayorText.Substring(0, len) + ".." : "/" + Model.QAPayorText;}
            @{string title = (!string.IsNullOrEmpty(Model.QAPayorText) ? Model.PayorText + "/" + Model.QAPayorText : Model.PayorText);}
            @Html.DropDownListFor(model => model.PayorID, new SelectList(@ViewBag.Payors, "ID", "Name"), new { @id = "PayorID12", @style = "display:none", @class = "form-control CoderDetails" })
            <div title="@title" class="col-md-3 lessWidth input-group">
                <div name="PayorText" class="form-control CoderDetails" style="line-height:2.5;overflow:hidden">
                    <span style="white-space:nowrap">

                        @if (!string.IsNullOrEmpty(Model.QAPayorText))
                        {
                            <label style="color: red;">@PayorText</label>
                            <label style="color:green">@QAPayorText</label>
                        }
                        else
                        {
                            <label style="color: green;">@PayorText</label>
                        }
                    </span>
                </div>
            </div>
            <div class="input-group-append CoderCorrections">
                <span class="input-group-text">
                    &nbsp;<i id="PayorID" title="PayorID1" class="fa fa-check-circle fa-lg" aria-hidden="true"></i>
                    &nbsp;<i id="PayorID" title="PayorID1" class="fa fa-times-circle fa-lg" aria-hidden="true"></i>
                </span>
            </div>
            @{string Show = (!string.IsNullOrEmpty(Model.ShadowQAPayorRemarks) || !string.IsNullOrEmpty(Model.QAPayorText) ? "display:flex" : "visibility:hidden");}
            <div class="col-md-3 input-group CoderCorrections PayorID" style="@Show">
                @Html.TextBoxFor(model => model.QAPayorRemarks, new { @class = "form-control", @data_val = "false" })
                @Html.ValidationMessageFor(model => model.QAPayorRemarks, null, new { @class = "text-danger errMsg" })
            </div>
            <div class="col-md-3 lessWidth input-group" style="@Show">
                @Html.DropDownListFor(model => model.ShadowQAPayorID, new SelectList(@ViewBag.Payors, "ID", "Name"), new { @id = "PayorID1", @class = "form-control QARevised" })
                @Html.ValidationMessageFor(model => model.ShadowQAPayorID, null, new { @class = "text-danger errMsg" })
            </div>
            <div title="@Model.ShadowQAPayorRemarks" class="col-md-2 input-group" style="@Show">
                <input type="text" class="form-control QARemarks" value="@Model.ShadowQAPayorRemarks" />
            </div>
        </div>
        <div class="form-group row">
            <label class="col-md-3 lessWidth m-t-15">Provider</label>
            @{ len = (!string.IsNullOrEmpty(Model.QAProviderText) ? 10 : 20); }
            @{string ProviderText = (Model.ProviderText?.Length > len) ? Model.ProviderText.Substring(0, len) + ".." : Model.ProviderText;}
            @{string QAProviderText = (Model.QAProviderText?.Length > len) ? "/" + Model.QAProviderText.Substring(0, len) + ".." : "/" + Model.QAProviderText;}
            @{title = (!string.IsNullOrEmpty(Model.QAProviderText) ? Model.ProviderText + "/" + Model.QAProviderText : Model.ProviderText);}
            @Html.DropDownListFor(model => model.ProviderID, new SelectList(@ViewBag.Providers, "ID", "Name"), new { @id = "ProviderID12", @style = "display:none", @class = "form-control CoderDetails" })
            <div title="@title" class="col-md-3 lessWidth input-group">
                <div class="form-control CoderDetails" style="line-height:2.5;overflow:hidden">
                    <span style="white-space:nowrap">
                        @if (!string.IsNullOrEmpty(Model.QAProviderText))
                        {
                            <label style="color: red;">@ProviderText</label>
                            <label style="color:green">@QAProviderText</label>
                        }
                        else
                        {
                            <label style="color: green;">@ProviderText</label>
                        }
                    </span>
                </div>
            </div>
            <div class="input-group-append CoderCorrections">
                <span class="input-group-text">
                    &nbsp;<i id="ProviderID" title="ProviderID1" class="fa fa-check-circle fa-lg" aria-hidden="true"></i>
                    &nbsp;<i id="ProviderID" title="ProviderID1" class="fa fa-times-circle fa-lg" aria-hidden="true"></i>
                </span>
            </div>
            @{Show = (!string.IsNullOrEmpty(Model.ShadowQAProviderRemarks) || !string.IsNullOrEmpty(Model.QAProviderRemarks) ? "display:flex" : "visibility:hidden");}
            <div class="col-md-3 input-group CoderCorrections ProviderID" style="@Show">
                @Html.TextBoxFor(model => model.QAProviderRemarks, new { @class = "form-control", @data_val = "false" })
                @Html.ValidationMessageFor(model => model.QAProviderRemarks, null, new { @class = "text-danger errMsg" })
            </div>
            @{Show = (string.IsNullOrEmpty(Model.ShadowQAProviderRemarks) ? "visibility:hidden" : "display:flex");}
            <div class="col-md-3 lessWidth input-group" style="@Show">
                @Html.DropDownListFor(model => model.ShadowQAProviderID, new SelectList(@ViewBag.Providers, "ID", "Name"), new { @id = "ProviderID1", @class = "form-control CoderDetails" })
                @Html.ValidationMessageFor(model => model.ShadowQAProviderID, null, new { @class = "text-danger errMsg" })
            </div>
            <div title="@Model.ShadowQAProviderRemarks" class="col-md-2 input-group" style="@Show">
                <input type="text" class="form-control QARemarks" value="@Model.ShadowQAProviderRemarks" />
            </div>
        </div>
        @*<div class="form-group row">
                <label class="col-md-3 lessWidth m-t-15">CPT</label>
                @{len = (!string.IsNullOrEmpty(Model.QACPTCode) ? 10 : 20); }
                @{string CPTCode = (Model.CPTCode?.Length > len) ? Model.CPTCode.Substring(0, len) + ".." : Model.CPTCode;}
                @{string QACPTCode = (Model.QACPTCode?.Length > len) ? "/" + Model.QACPTCode.Substring(0, len) + ".." : "/" + Model.QACPTCode;}
                @{title = (!string.IsNullOrEmpty(Model.QACPTCode) ? Model.CPTCode + "/" + Model.QACPTCode : Model.CPTCode);}
                @Html.TextAreaFor(model => model.CPTCode, new { @id = "CPTCode12", @style = "display:none", @class = "form-control CoderDetails" })

                <div title="@title" class="col-md-3 lessWidth input-group">
                    <div class="form-control CoderDetails" style="line-height:2.5;overflow:hidden">
                        <span style="white-space:nowrap">

                            @if (!string.IsNullOrEmpty(Model.QACPTCode))
                            {
                                <label style="color: red;">@CPTCode</label>
                                <label style="color:green">@QACPTCode</label>
                            }
                            else
                            {
                                <label style="color: green;">@CPTCode</label>
                            }
                        </span>
                    </div>
                </div>
                <div class="input-group-append CoderCorrections">
                    <span class="input-group-text">
                        &nbsp;<i id="CPTCode" title="CPTCode1" class="fa fa-check-circle fa-lg" aria-hidden="true"></i>
                        &nbsp;<i id="CPTCode" title="CPTCode1" class="fa fa-times-circle fa-lg" aria-hidden="true"></i>
                    </span>
                </div>
                @{Show = (!string.IsNullOrEmpty(Model.ShadowQACPTCodeRemarks) || !string.IsNullOrEmpty(Model.QACPTCode) ? "display:flex" : "visibility:hidden");}
                <div class="col-md-3 input-group CoderCorrections CPTCode" style="@Show">
                    @Html.TextBoxFor(model => model.QACPTCodeRemarks, new { @class = "form-control", @data_val = "false" })
                    @Html.ValidationMessageFor(model => model.QACPTCodeRemarks, null, new { @class = "text-danger errMsg" })
                </div>
                @{Show = (string.IsNullOrEmpty(Model.ShadowQACPTCodeRemarks) ? "visibility:hidden" : "display:flex");}
                <div class="col-md-3 lessWidth input-group" style="@Show">
                    @Html.TextBoxFor(model => model.ShadowQACPTCode, new { @id = "CPTCode1", @class = "form-control", @data_val = "false" })
                    @Html.ValidationMessageFor(model => model.ShadowQACPTCode, null, new { @class = "text-danger errMsg" })
                </div>
                <div title="@Model.ShadowQACPTCodeRemarks" class="col-md-2 input-group" style="@Show">
                    <input type="text" class="form-control QARemarks" value="@Model.ShadowQACPTCodeRemarks" />
                </div>
            </div>
            <div class="form-group row">
                <label class="col-md-3 lessWidth m-t-15">Mod</label>
                @{len = (!string.IsNullOrEmpty(Model.QAMod) ? 10 : 20); }
                @{string Mod = (Model.Mod?.Length > len) ? Model.Mod.Substring(0, len) + ".." : Model.Mod;}
                @{string QAMod = (Model.QAMod?.Length > len) ? "/" + Model.QAMod.Substring(0, len) + ".." : "/" + Model.QAMod;}
                @{title = (!string.IsNullOrEmpty(Model.QAMod) ? Model.Mod + "/" + Model.QAMod : Model.Mod);}
                @Html.TextAreaFor(model => model.Mod, new { @id = "Mod12", @style = "display:none", @class = "form-control CoderDetails" })

                <div title="@title" class="col-md-3 lessWidth input-group">
                    <div class="form-control CoderDetails" style="line-height:2.5;overflow:hidden">
                        <span style="white-space:nowrap">

                            @if (!string.IsNullOrEmpty(Model.QAMod))
                            {
                                <label style="color: red;">@Mod</label>
                                <label style="color:green">@QAMod</label>
                            }
                            else
                            {
                                <label style="color: green;">@Mod</label>
                            }
                        </span>
                    </div>
                </div>
                <div class="input-group-append CoderCorrections">
                    <span class="input-group-text">
                        &nbsp;<i id="Mod" title="Mod1" class="fa fa-check-circle fa-lg" aria-hidden="true"></i>
                        &nbsp;<i id="Mod" title="Mod1" class="fa fa-times-circle fa-lg" aria-hidden="true"></i>
                    </span>
                </div>
                @{Show = (!string.IsNullOrEmpty(Model.ShadowQAModRemarks) || !string.IsNullOrEmpty(Model.QAMod) ? "display:flex" : "visibility:hidden");}
                <div class="col-md-3 input-group CoderCorrections Mod" style="@Show">
                    @Html.TextBoxFor(model => model.QAModRemarks, new { @class = "form-control", @data_val = "false" })
                    @Html.ValidationMessageFor(model => model.QAModRemarks, null, new { @class = "text-danger errMsg" })
                </div>
                @{Show = (string.IsNullOrEmpty(Model.ShadowQAModRemarks) ? "visibility:hidden" : "display:flex");}
                <div class="col-md-3 lessWidth input-group" style="@Show">
                    @Html.TextBoxFor(model => model.ShadowQAMod, new { @id = "Mod1", @class = "form-control", @data_val = "false" })
                    @Html.ValidationMessageFor(model => model.ShadowQAMod, null, new { @class = "text-danger errMsg" })
                </div>
                <div title="@Model.ShadowQAModRemarks" class="col-md-2 input-group" style="@Show">
                    <input type="text" class="form-control QARemarks" value="@Model.ShadowQAModRemarks" />
                </div>

            </div>
            <div class="form-group row">
                    <label class="col-md-3 lessWidth m-t-15">Dx</label>
                    @{len = (!string.IsNullOrEmpty(Model.QADx) ? 10 : 20); }
                    @{string Dx = (Model.Dx?.Length > len) ? Model.Dx.Substring(0, len) + ".." : Model.Dx;}
                    @{string QADx = (Model.QADx?.Length > len) ? "/" + Model.QADx.Substring(0, len) + ".." : "/" + Model.QADx;}
                    @{title = (!string.IsNullOrEmpty(Model.QADx) ? Model.Dx + "/" + Model.QADx : Model.Dx);}
                    @Html.TextAreaFor(model => model.Dx, new { @style = "display:none", @class = "form-control CoderDetails" })

                    <div title="@title" class="col-md-3 lessWidth input-group">
                        <div class="form-control CoderDetails" style="line-height:2.5;overflow:hidden">
                            <span style="white-space:nowrap">

                                @if (!string.IsNullOrEmpty(Model.QADx))
                                {
                                    <label style="color: red;">@Dx</label>
                                    <label style="color:green">@QADx</label>
                                }
                                else
                                {
                                    <label style="color: green;">@Dx</label>
                                }
                            </span>
                        </div>
                    </div>
                    <div class="input-group-append CoderCorrections">
                        <span class="input-group-text">
                            &nbsp;<i id="DX" title="Dx1" class="fa fa-check-circle fa-lg" aria-hidden="true"></i>
                            &nbsp;<i id="DX" title="Dx1" class="fa fa-times-circle fa-lg" aria-hidden="true"></i>
                        </span>
                    </div>
                    @{Show = (!string.IsNullOrEmpty(Model.ShadowQADxRemarks) || !string.IsNullOrEmpty(Model.QADx) ? "display:flex" : "visibility:hidden");}
                    <div class="col-md-3 input-group CoderCorrections Dx" style="@Show">
                        @Html.TextBoxFor(model => model.QADxRemarks, new { @class = "form-control", @data_val = "false" })
                        @Html.ValidationMessageFor(model => model.QADxRemarks, null, new { @class = "text-danger errMsg" })
                    </div>
                    @{Show = (string.IsNullOrEmpty(Model.ShadowQADxRemarks) ? "visibility:hidden" : "display:flex");}
                    <div class="col-md-3 lessWidth input-group" style="@Show">
                        @Html.TextBoxFor(model => model.ShadowQADx, new { @id = "Dx1", @class = "form-control", @data_val = "false" })
                        @Html.ValidationMessageFor(model => model.ShadowQADx, null, new { @class = "text-danger errMsg" })
                    </div>
                    <div title="@Model.ShadowQADxRemarks" class="col-md-2 input-group" style="@Show">
                        <input type="text" class="form-control QARemarks" value="@Model.ShadowQADxRemarks" />
                    </div>
                </div>*@
        <div class="form-group row">
            <label class="col-md-3 lessWidth m-t-15"> Feedback to Provider</label>
            @{len = (!string.IsNullOrEmpty(Model.QAProviderFeedbackText) ? 10 : 20); }
            @{string ProviderFeedbackText = (Model.ProviderFeedbackText?.Length > len) ? Model.ProviderFeedbackText.Substring(0, len) + ".." : Model.ProviderFeedbackText;}
            @{string QAProviderFeedbackText = (Model.QAProviderFeedbackText?.Length > len) ? "/" + Model.QAProviderFeedbackText.Substring(0, len) + ".." : "/" + Model.QAProviderFeedbackText;}
            @{title = (!string.IsNullOrEmpty(Model.QAProviderFeedbackText) ? Model.ProviderFeedbackText + "/" + Model.QAProviderFeedbackText : Model.ProviderFeedbackText);}
            @Html.DropDownListFor(model => model.ProviderFeedbackID, new SelectList(@ViewBag.ProviderFeedbacks, "ID", "Name"), new { @style = "display:none", @class = "form-control CoderDetails" })

            <div title="@title" class="col-md-3 lessWidth input-group">
                <div class="form-control CoderDetails" style="line-height:2.5;overflow:hidden">
                    <span style="white-space:nowrap">

                        @if (!string.IsNullOrEmpty(Model.QAProviderFeedbackText))
                        {
                            <label style="color: red;">@ProviderFeedbackText</label>
                            <label style="color:green">@QAProviderFeedbackText</label>
                        }
                        else
                        {
                            <label style="color: green;">@ProviderFeedbackText</label>
                        }
                    </span>
                </div>
            </div>
            <div class="input-group-append CoderCorrections">
                <span class="input-group-text">
                    &nbsp;<i id="Feedback" title="Feedback1" class="fa fa-check-circle fa-lg" aria-hidden="true"></i>
                    &nbsp;<i id="Feedback" title="Feedback1" class="fa fa-times-circle fa-lg" aria-hidden="true"></i>
                </span>
            </div>
            @{Show = (!string.IsNullOrEmpty(Model.ShadowQAProviderFeedbackRemarks) || !string.IsNullOrEmpty(Model.QAProviderFeedbackText) ? "display:flex" : "visibility:hidden");}
            <div class="col-md-3 input-group CoderCorrections Feedback" style="@Show">
                @Html.TextBoxFor(model => model.QAProviderFeedbackRemarks, new { @class = "form-control", @data_val = "false" })
                @Html.ValidationMessageFor(model => model.QAProviderFeedbackRemarks, null, new { @class = "text-danger errMsg" })
            </div>
            @{Show = (string.IsNullOrEmpty(Model.ShadowQAProviderFeedbackRemarks) ? "visibility:hidden" : "display:flex");}
            <div class="col-md-3 lessWidth input-group" style="@Show">
                @Html.DropDownListFor(model => model.ShadowQAProviderFeedbackID, new SelectList(@ViewBag.ProviderFeedbacks, "ID", "Name"), new { @class = "form-control QARevised", @id = "Feedback1" })
                @Html.ValidationMessageFor(model => model.ShadowQAProviderFeedbackID, null, new { @class = "text-danger errMsg" })
            </div>
            <div title="@Model.ShadowQAProviderFeedbackRemarks" class="col-md-2 input-group" style="@Show">
                <input type="text" class="form-control QARemarks" value="@Model.ShadowQAProviderFeedbackRemarks" />
            </div>
        </div>
        <div class="form-group row">
            <label class="col-md-3 lessWidth m-t-15">Note Title</label>
            <div class="col-md-3 lessWidth">
                @Html.TextAreaFor(model => model.NoteTitle, new { @class = "form-control CoderDetails" })
            </div>
        </div>



        @{
            //Dictionary<int, string> dictShadowQADxCodes = Utility.GetQAOrShadowQADxCodes(Model.ShadowQADx);
            //List<string> lstdxCodes = Model.Dx.Split(',').ToList();
            //int? countShadow = (dictShadowQADxCodes?.Count() > lstdxCodes.Count()) ? dictShadowQADxCodes?.Count() : lstdxCodes.Count();
            //Dictionary<int, string> dictQADxCodes = Utility.GetQADxCodes(Model.QADx,countShadow);
            //int? count = (dictQADxCodes?.Count() > lstdxCodes.Count()) ? dictQADxCodes?.Count() : lstdxCodes.Count();
            //Dictionary<int, string> dictDxCodes = Utility.GetDxCodes(Model.Dx, countShadow.Value);
            //int totalDxCount = count.Value + 1;
            //Dictionary<int, string> dictQADxRemarks = Utility.GetQAOrShadowQADxRemarks(Model.QADxRemarks, count.Value);
            //Dictionary<int, string> dictShadowQADxRemarks = Utility.GetQAOrShadowQADxRemarks(Model.ShadowQADxRemarks, countShadow.Value);


            //List<string> lstShadowQadxCodes = Model.ShadowQADx.Split('|').ToList();
            //List<string> lstQadxCodes = Model.QADx.Split('|').ToList();
            //List<string> lstdxCodes = Model.Dx.Split(',').ToList();
            //int? countShadow = (lstShadowQadxCodes?.Count() > lstdxCodes.Count()) ? lstShadowQadxCodes?.Count() : lstdxCodes.Count();
            //int? count = (lstQadxCodes?.Count() > lstdxCodes.Count()) ? lstQadxCodes?.Count() : lstdxCodes.Count();
            //Dictionary<int, string> dictShadowQADxCodes = Utility.GetQADxCodes(Model.ShadowQADx, count.Value);
            //Dictionary<int, string> dictQADxCodes = Utility.GetQADxCodes(Model.QADx, count.Value);
            //countShadow = (countShadow > dictShadowQADxCodes.Count()) ? countShadow : dictShadowQADxCodes.Count();
            //count = (count > dictQADxCodes.Count()) ? count : dictQADxCodes.Count();
            //Dictionary<int, string> dictDxCodes = Utility.GetDxCodes(Model.Dx, countShadow.Value);
            //int totalDxCount = count.Value + 1;
            //Dictionary<int, string> dictShadowQADxRemarks = Utility.GetQAOrShadowQADxRemarks(Model.ShadowQADxRemarks, countShadow.Value);
            //Dictionary<int, string> dictQADxRemarks = Utility.GetQAOrShadowQADxRemarks(Model.QADxRemarks, count.Value);

            Dictionary<int, string> dictDxCodes = Utility.GetDxCodes(Model.Dx);
            Dictionary<int, string> dictQADxCodes = Utility.GetQAOrShadowQADxCodes(Model.QADx);
            Dictionary<int, string> dictShadowQADxCodes = Utility.GetQAOrShadowQADxCodes(Model.ShadowQADx);

            Dictionary<int, string> dictQADxRemarks = Utility.GetQAOrShadowQADxRemarks(Model.QADxRemarks);
            Dictionary<int, string> dictShadowQADxRemarks = Utility.GetQAOrShadowQADxRemarks(Model.ShadowQADxRemarks);

            dictQADxCodes = (dictQADxCodes == null ? new Dictionary<int, string>() : dictQADxCodes);
            dictShadowQADxCodes = (dictShadowQADxCodes == null ? new Dictionary<int, string>() : dictShadowQADxCodes);

            int count = Math.Max(dictDxCodes.Count(), Math.Max(dictQADxCodes.Count(), dictShadowQADxCodes.Count()));

            int totalDxCount = count + 1;

            Utility.AddEmptyRows(dictDxCodes, count, "NA");
            Utility.AddEmptyRows(dictQADxCodes, count, "");
            Utility.AddEmptyRows(dictShadowQADxCodes, count, "");
            Utility.AddEmptyRows(dictShadowQADxRemarks, count, "");
            Utility.AddEmptyRows(dictQADxRemarks, count, "");
        }
        <div id="DivDx">
            @{
                int j = 1;
                int i;
                for (i = 0; i < count; i++)
                {
                    <div class="form-group row">
                        @if (i == 0)
                        {
                            <label class="col-md-3 lessWidth m-t-15">Dx</label>
                        }
                        else
                        {
                            <label class="col-md-3 lessWidth m-t-15"></label>
                        }

                        @{len = (!string.IsNullOrEmpty(dictShadowQADxCodes?.ElementAt(i).Value) ? 10 : 20); }
                        @{string Dx = (dictDxCodes.ElementAt(i).Value?.Length > len) ? dictDxCodes.ElementAt(i).Value.Substring(0, len) + ".." : dictDxCodes.ElementAt(i).Value;}
                        @{string QADx = (dictQADxCodes?.ElementAt(i).Value?.Length > len) ? "/" + dictQADxCodes?.ElementAt(i).Value.Substring(0, len) + ".." : "/" + dictQADxCodes?.ElementAt(i).Value;}
                        @{string ShadowQADx = (dictShadowQADxCodes?.ElementAt(i).Value?.Length > len) ? "/" + dictShadowQADxCodes?.ElementAt(i).Value.Substring(0, len) + ".." : "/" + dictShadowQADxCodes?.ElementAt(i).Value;}
                        @{title = (!string.IsNullOrEmpty(dictQADxCodes?.ElementAt(i).Value) ? dictDxCodes.ElementAt(i).Value + "/" + dictQADxCodes?.ElementAt(i).Value : dictDxCodes.ElementAt(i).Value);}

                        <div class="col-md-3 lessWidth input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="basic-addon1">@j</span>
                            </div>
                            <div class="form-control CoderDetails" style="line-height:2.5;overflow:hidden">
                                <span style="white-space:nowrap">
                                    @if (!string.IsNullOrEmpty(dictQADxCodes?.ElementAt(i).Value))
                                    {
                                        <label style="color: red;">@Dx</label>
                                        <label style="color:green">@QADx</label>
                                    }
                                    else
                                    {
                                        <label style="color: green;">@Dx</label>
                                    }
                                </span>
                            </div>
                        </div>
                        <div class="input-group-append">
                            <span class="input-group-text">
                                &nbsp;<i id="Dx_@i" class="fa fa-check-circle fa-lg" aria-hidden="true"></i>
                                &nbsp;<i id="Dx_@i" class="fa fa-times-circle fa-lg" aria-hidden="true"></i>
                            </span>
                        </div>
                        @{ Show = (string.IsNullOrEmpty(dictQADxRemarks?.ElementAt(i).Value) ? "visibility:hidden" : "display:flex"); }
                        <div title="" class="col-md-2 input-group" style="@Show">
                            <input type="text" class="form-control QARemarks" value="@dictQADxRemarks?.ElementAt(i).Value" />
                        </div>

                        <div class="col-md-3 lessWidth input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="basic-addon1">@j</span>
                            </div>
                            @{
                                string ShadowQaDxVal = !string.IsNullOrEmpty(dictShadowQADxCodes?.ElementAt(i).Value) ? dictShadowQADxCodes?.ElementAt(i).Value : !string.IsNullOrEmpty(dictQADxCodes?.ElementAt(i).Value) ? dictQADxCodes?.ElementAt(i).Value : dictDxCodes?.ElementAt(i).Value;
                                if (dictShadowQADxCodes?.ElementAt(i).Value == "NA" && string.IsNullOrEmpty(dictQADxCodes?.ElementAt(i).Value))
                                {
                                    ShadowQaDxVal = dictDxCodes.ElementAt(i).Value;
                                }
                            }
                            <input type="text" id="txtDx_@i" class="form-control txtDx" autocomplete="off" tabindex="@i" placeholder="Code" value="@ShadowQaDxVal" />
                        </div>
                        <div class="col-md-3 lessWidth input-group Dx_@i" style="display:none">
                            <input type="text" id="Dx_@i" class="form-control QARevised" />
                        </div>

                        @{ Show = (string.IsNullOrEmpty(dictShadowQADxRemarks?.ElementAt(i).Value) ? "visibility:hidden" : "display:flex"); }
                        <div title="" class="col-md-2 input-group" style="@Show">
                            <input type="text" class="form-control QARemarks" value="@dictShadowQADxRemarks?.ElementAt(i).Value" />
                        </div>

                    </div>

                    j = j + 1;
                }
            }

            <div class="form-group row">
                <label class="col-md-3 lessWidth m-t-15"></label>
                <div class="col-md-3 lessWidth input-group">
                </div>
                <div class="input-group-append" style="min-width: 77px;">
                </div>
                <div class="col-md-3 lessWidth input-group">
                </div>
                <div class="col-md-3 lessWidth input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="basic-addon1">@totalDxCount</span>
                    </div>
                    <input type="text" id="txtDx_@totalDxCount" onfocusout="DxFunction('txtDx_@totalDxCount')" class="form-control txtDx" tabindex="@totalDxCount" autofocus="autofocus" autocomplete="off" placeholder="Code" />
                </div>
            </div>
        </div>

        @{
            Dictionary<int, string> dictCptCodes = Utility.GetCptCodes(Model.CPTCode);
            Dictionary<int, string> dictQACptCodes = Utility.GetQAOrShadowQACptCodes(Model.QACPTCode);
            Dictionary<int, string> dictShadowQACptCodes = Utility.GetQAOrShadowQACptCodes(Model.ShadowQACPTCode);

            Dictionary<int, string> dictQACptRemarks = Utility.GetQAOrShadowQACptRemarks(Model.QACPTCodeRemarks);
            Dictionary<int, string> dictShadowQACptRemarks = Utility.GetQAOrShadowQADxRemarks(Model.ShadowQACPTCodeRemarks);

            dictQACptCodes = (dictQACptCodes == null) ? new Dictionary<int, string>() : dictQACptCodes;
            dictQACptRemarks = (dictQACptRemarks == null) ? new Dictionary<int, string>() : dictQACptRemarks;

            count = Math.Max(dictCptCodes.Count(), Math.Max(dictQACptCodes.Count(), dictShadowQACptCodes.Count()));

            int totalCptCount = count + 1;

            Utility.AddEmptyRows(dictCptCodes, count, "NA");
            Utility.AddEmptyRows(dictQACptCodes, count, "");
            Utility.AddEmptyRows(dictShadowQACptCodes, count, "");
            Utility.AddEmptyRows(dictShadowQACptRemarks, count, "");
            Utility.AddEmptyRows(dictQACptRemarks, count, "");

        }
        <div id="DivCpt">
            @{
                j = 1;
                for (i = 0; i < count; i++)
                {

                    <div class="form-group row" id="DivCptRow_@j">
                        @if (i == 0)
                        {
                            <label class="col-md-3 lessWidth m-t-15">CPT</label>
                        }
                        else
                        {
                            <label class="col-md-3 lessWidth m-t-15"></label>
                        }
                        @{ string[] coderCptcodes = dictCptCodes?.ElementAt(i).Value.Split("^");}
                        @{ string[] qaCptcodes = dictQACptCodes?.ElementAt(i).Value.Split("^");}

                        <div class="col-md-3 input-group" style="max-width:26% !important;">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="basic-addon1">@j</span>
                            </div>

                            @if (!string.IsNullOrEmpty(dictQACptCodes?.ElementAt(i).Value))
                            {
                                string codercptCode = (dictCptCodes?.ElementAt(i).Value == "NA" ? "NA" : coderCptcodes[0]);
                                string qacptCode = (dictQACptCodes?.ElementAt(i).Value == "" ? "" : qaCptcodes[0]);
                                string color = (codercptCode != qacptCode) ? "color:blue;" : "";
                                if (codercptCode == "NA")
                                    color = "color:fuchsia;";
                                <input type="text" class="form-control" value="@qacptCode" style="width:17px;@color" />

                                string coderMod = (dictCptCodes?.ElementAt(i).Value == "NA" ? "NA" : coderCptcodes[1]);
                                string qaMod = (dictQACptCodes?.ElementAt(i).Value == "" ? "" : qaCptcodes[1]);
                                color = (coderMod != qaMod) ? "color:blue;" : "";
                                if (coderMod == "NA")
                                    color = "color:fuchsia;";
                                <input type="text" class="form-control" value="@qaMod" style="@color" />

                                string coderQty = (dictCptCodes?.ElementAt(i).Value == "NA" ? "NA" : coderCptcodes[2]);
                                string qaQty = (dictQACptCodes?.ElementAt(i).Value == "" ? "" : qaCptcodes[2]);
                                color = (coderQty != qaQty) ? "color:blue;" : "";
                                if (coderQty == "NA")
                                    color = "color:fuchsia;";
                                <input type="text" class="form-control" value="@qaQty" style="@color" />

                                string coderLinks = (dictCptCodes?.ElementAt(i).Value == "NA" ? "NA" : coderCptcodes[3]);
                                string qaLinks = (dictQACptCodes?.ElementAt(i).Value == "" ? "" : qaCptcodes[3]);
                                color = (coderLinks != qaLinks) ? "color:blue;" : "color:Red;";
                                if (coderLinks == "NA")
                                    color = "color:fuchsia;";
                                <input type="text" class="form-control" value="@qaLinks" style="@color" />
                            }
                            else
                            {
                                string coderModVal = coderCptcodes[1] == "null" ? "" : coderCptcodes[1];
                                string coderLinkAllVal = coderCptcodes[3] == "null" ? "" : coderCptcodes[3];

                                <input type="text" class="form-control" style="color: green;width: 17px;" placeholder="Code" value="@coderCptcodes[0]" />
                                <input type="text" class="form-control" style="color:green;" placeholder="Mod" value="@coderModVal" />
                                <input type="text" class="form-control" style="color:green;" placeholder="1" value="@coderCptcodes[2]" />
                                <input type="text" class="form-control" style="color: green;" placeholder="Link All" value="@coderLinkAllVal" />

                            }
                            <div class="input-group-append" style="height: 45px;">
                                <span class="input-group-text">
                                    &nbsp;<i id="Cpt_@j" class="fa fa-check-circle fa-lg" aria-hidden="true"></i>
                                    &nbsp;<i id="Cpt_@j" class="fa fa-times-circle fa-lg" aria-hidden="true"></i>
                                </span>
                            </div>
                        </div>

                        @{ Show = (string.IsNullOrEmpty(dictQACptRemarks?.ElementAt(i).Value) ? "visibility:hidden" : "display:flex"); }
                        <div title="" class="col-md-2 input-group" style="@Show">
                            <input type="text" class="form-control QARemarks" value="@dictQACptRemarks?.ElementAt(i).Value" />
                        </div>
                        <div class="col-md-3 CptlessWidth input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="basic-addon1">@j</span>
                            </div>

                            @{
                                string ShadowQaCptVal = "";
                                string ShadowQaModVal = "";
                                string ShadowQaQtyVal = "";
                                string ShadowQaLinkAllVal = "";
                                ShadowQaCptVal = !string.IsNullOrEmpty(dictShadowQACptCodes?.ElementAt(i).Value) ? dictShadowQACptCodes?.ElementAt(i).Value : !string.IsNullOrEmpty(dictQACptCodes?.ElementAt(i).Value) ? dictQACptCodes?.ElementAt(i).Value : dictCptCodes?.ElementAt(i).Value;
                                if (dictShadowQACptCodes?.ElementAt(i).Value == "NA" && string.IsNullOrEmpty(dictQACptCodes?.ElementAt(i).Value))
                                {
                                    string[] CptCodes = dictCptCodes.ElementAt(i).Value.Split("^");
                                    ShadowQaCptVal = CptCodes[0];
                                    ShadowQaModVal = CptCodes[1] == "null" ? "" : CptCodes[1];
                                    ShadowQaQtyVal = CptCodes[2];
                                    ShadowQaLinkAllVal = CptCodes[3] == "null" ? "" : CptCodes[3];
                                }
                                else
                                {
                                    string[] CptCodes = dictCptCodes.ElementAt(i).Value.Split("^");
                                    ShadowQaCptVal = CptCodes[0] == "NA" ? "" : CptCodes[0];
                                    if (ShadowQaCptVal != "")
                                    {
                                        ShadowQaModVal = CptCodes[1] == "null" ? "" : CptCodes[1];
                                        ShadowQaQtyVal = CptCodes[2];
                                        ShadowQaLinkAllVal = CptCodes[3] == "null" ? "" : CptCodes[3];
                                    }
                                }
                            }
                            <input type="text" class="form-control" id="txtCpt_@j" autocomplete="off" placeholder="Code" value="@ShadowQaCptVal" />
                            <input type="text" class="form-control" id="txtMod_@j" autocomplete="off" placeholder="Mod" value="@ShadowQaModVal" />
                            <input type="text" id="txtQty_@j" class="form-control" autocomplete="off" placeholder="1" value="@ShadowQaQtyVal" />
                            <input type="text" id="txtLinks_@j" class="form-control" autocomplete="off" placeholder="Link All" value="@ShadowQaLinkAllVal" />
                        </div>
                        @{ Show = (string.IsNullOrEmpty(dictShadowQACptRemarks?.ElementAt(i).Value) ? "visibility:hidden" : "display:flex"); }

                        <div title="" class="col-md-2 input-group" style="@Show">
                            <input type="text" class="form-control QARemarks" value="@dictShadowQACptRemarks?.ElementAt(i).Value" />
                        </div>
                    </div>
                    j = j + 1;
                }
            }
            <div class="form-group row">
                <label class="col-md-3 lessWidth m-t-15"></label>
                <div class="col-md-3 CptlessWidth input-group" style="visibility:hidden;max-width:26% !important;">
                    <div class="input-group-append" style="height: 38px;">
                        <span class="input-group-text">
                            &nbsp;<i class="fa fa-edit fa-lg" aria-hidden="true"></i>
                            &nbsp;<i class="fa fa-edit fa-lg" aria-hidden="true"></i>
                        </span>
                    </div>
                </div>
                <div class="col-md-2 input-group">
                </div>
                <div class="col-md-3 CptlessWidth input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="basic-addon1">@totalCptCount</span>
                    </div>
                    <input type="text" class="form-control" id="txtCpt_@totalCptCount" autofocus="autofocus" autocomplete="off" placeholder="Code" />
                    <input type="text" class="form-control" id="txtMod_@totalCptCount" autocomplete="off" placeholder="Mod" />
                    <input type="text" id="txtQty_@totalCptCount" class="form-control" autocomplete="off" placeholder="1" />
                    <input type="text" id="txtLinks_@totalCptCount" onfocusout="CptFunction('txtLinks_@totalCptCount+')" class="form-control" autocomplete="off" placeholder="Link All" />
                </div>
            </div>
        </div>


    </div>

    <div class="clearfix"></div>
    <div class="card">
        <div class="card-body">
            <h4 class="card-title">QA Details</h4>
        </div>
        <div class="card-body">
            <div class="col-12">
                <div class="row mb-3">
                    <div class="col-lg-6">
                        <div class="form-group row">
                            <label class="col-md-3 m-t-15">
                                Error Type
                            </label>
                            <div class="col-md-7">
                                @Html.DropDownListFor(model => model.QADTO.ErrorType, new SelectList(@ViewBag.ErrorTypes, "ID", "Name"), "--Select--", new { @class = "form-control" })
                                @Html.ValidationMessageFor(model => model.QADTO.ErrorType, null, new { @class = "text-danger ErrorType" })
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="form-group row">
                            <label class="col-md-5 m-t-15"></label>
                            <div class="col-md-7">
                                <button id="btnsubmit" type="submit" class="btn btn-success">Submit</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<style>
    .errMsg {
        font-weight: bold;
        font-size: 20px;
    }

    #sortable-1 {
        list-style-type: none;
        margin: 0;
        padding: 0;
        width: 25%;
    }

    /*     #sortable-1 li {
                    margin: 0 3px 3px 3px;
                    padding: 0.4em;
                    padding-left: 1.5em;
                    font-size: 17px;
                    height: 16px;
                }*/

    .default {
        background: #cedc98;
        border: 1px solid #DDDDDD;
        color: #333333;
    }

    .custom-control-label:before {
        left: -35px;
    }

    .custom-control-label:after {
        left: -35px;
    }

    .custom-control {
        padding-left: 0rem;
    }
</style>

