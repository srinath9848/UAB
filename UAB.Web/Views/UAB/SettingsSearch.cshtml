@model UAB.DTO.SearchParametersDTO
@{
    ViewData["Title"] = "Search";
}

<style>
    .lblSearch {
        width: 100px;
    }
</style>
<div class="col-md-10">
    <h5 class="card-title" style="font-size:20px;margin-left:500px;">Search</h5>
    @await Html.PartialAsync("_Msg")
</div>
    <div class="form-group">
        <div class="col-md-4">
            <label class="lblSearch">Clinical case Id</label>
            @Html.TextBoxFor(model => model.ClinicalCaseId, new { @class = "form-control", @autofocus = "autofocus", @id = "txtClinicalCaseId", @autocomplete = "off" })
            @Html.ValidationMessageFor(model => model.ClinicalCaseId, null, new { @class = "text-danger" })
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        </div>
        <br />
        <div class="col-md-4">
            <label class="lblSearch">First Name</label>
            @Html.TextBoxFor(model => model.FirstName, new { @class = "form-control", @autofocus = "autofocus", @id = "txtFirstName", @autocomplete = "off" })
            @Html.ValidationMessageFor(model => model.FirstName, null, new { @class = "text-danger" })
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        </div>
        <br />
        <div class="col-md-4">
            <label class="lblSearch">Last Name</label>
            @Html.TextBoxFor(model => model.LastName, new { @class = "form-control", @autofocus = "autofocus", @id = "txtLastName", @autocomplete = "off" })
            @Html.ValidationMessageFor(model => model.LastName, null, new { @class = "text-danger" })
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        </div>
        <br />
        @*<div class="col-md-4">
            <label class="lblSearch">Provider Id</label>
            @Html.TextBoxFor(model => model.ProviderId, new { @class = "form-control", @autofocus = "autofocus", @id = "txtProviderId", @autocomplete = "off" })
            @Html.ValidationMessageFor(model => model.ClinicalCaseId, null, new { @class = "text-danger" })
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        </div>*@
        <div class="col-md-4">
            <label class="lblSearch">MRN</label>
            @Html.TextBoxFor(model => model.MRN, new { @class = "form-control", @autofocus = "autofocus", @id = "txtMRN", @autocomplete = "off" })
            @Html.ValidationMessageFor(model => model.MRN, null, new { @class = "text-danger" })
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        </div>
        <br />
        <div class="col-md-4">
            <label class="lblSearch">DOS</label>
            @Html.TextBoxFor(model => model.DoS, new { @class = "form-control", @autofocus = "autofocus", @id = "txtDOS", @autocomplete = "off" })
            @Html.ValidationMessageFor(model => model.DoS, null, new { @class = "text-danger" })
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        </div>
        <br />
        <div class="col-md-4">
            <label class="lblSearch">Status</label>
            @Html.DropDownListFor(model => model.StatusId, new SelectList(@ViewBag.Status, "StatusId", "Name"), "--Select a Status--", new { @id = "statusdd", @class = "form-control CoderDetails" })
            @Html.ValidationMessageFor(model => model.StatusId, null, new { @class = "text-danger" })
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        </div>
        <br />
        <div class="col-md-4">
            <label class="lblSearch">Project</label>
            @Html.DropDownListFor(model => model.ProjectId, new SelectList(@ViewBag.Projects, "ProjectId", "Name"), "--Select a Project--", new { @id = "projectdd", @class = "form-control CoderDetails" })
            @Html.ValidationMessageFor(model => model.ProjectId, null, new { @class = "text-danger" })
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        </div>
        <br />
        <div class="col-md-4">
            <div class="modal-footer">
                <button type="submit" class="btn btn-sm btn-info btn-fill" id="btnsubmit" onclick="Search()">Search</button>
                <a href="@Url.Action("SettingsSearch", "UAB")" class="btn btn-sm btn-danger btn-fill">Cancel</a>
            </div>
        </div>
    </div>
<div id="modalContent"></div>



<script src="~/dashboardassets/libs/jquery/dist/jquery.min.js"></script>
<script src="~/dashboardassets/libs/jquery-validation/dist/jquery.validate.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.11/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>
<script src="~/dashboardassets/extra-libs/DataTables/datatables.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        
         Search = function () {
            $.ajax({
                type: "POST",
                url: "@Url.Action("SettingsSearch", "UAB")",
                data: {
                    "ccid": $("#txtClinicalCaseId").val(),
                    "fname": $("#txtFirstName").val(),
                    "lname": $("#txtLastName").val(),
                    "mrn": $("#txtMRN").val(),
                    "sid": $("#statusdd").val(),
                    "pid": $("#projectdd").val()
                },
                success: function (response) {
                    $("#modalContent").html(response);
                },
                failure: function (response) {
                    alert(response);
                }
            });
        };


    });
</script>
